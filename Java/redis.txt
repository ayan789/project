redis
字符串（string） 列表（list） 集合（set）有序集合（zset）哈希（hash）
redis与数据库数据一致性 更新数据库之前更新缓存 设置缓存过期时间 定期同步
redis 数据持久化方式 
RDB （默认）定时将内存中的数据写入到.rdb文件磁盘中 数据的一致性低，数据恢复快
AOF 它采用日志的形式来记录每个写操作 数据的一致性高，数据恢复慢
redis分布式锁
数据库锁
redis锁 redis加锁setnx 解锁执行Lua代码
zookeeper 
高性能存储db 任务集群
实时性高 吞吐量大 

string Set Mset

缓存穿透 都不存在 两次无用的查询 布隆过滤器

缓存预热 上线时手工操作 程序轮训

热数据 冷数据

分布式锁 setnx key 当前系统时间＋自定义  
        del key 命令就能释放锁
设置锁超时时间
锁续命 

缓存穿透 数据不存在每次都请求存储层失去缓存意义
布隆过滤器 所有可能的数据进行hash 不存在的数据会被过滤器拦截掉  当返回为空的时候把空的请求结果进行缓存设置过期时间

缓存雪崩 缓存失效时间加一个随机时间 防止瞬间DB请求过大

缓存击穿
当缓存返回为null的时候 马上加长超时时间到cache,然后再加载数据到cache中

物理过期
逻辑过期

单机QPS上万到几万
读高并发
哨兵 主备切换
异步复制 脑裂(运行 但和其他机器不能连接)
至少有1个slave从节点，同步超时时间

场景:
热点数据 经常查询不被修改
计数器 单线程 避免并发问题
队列 并发请求串行 访客
分布式锁
幂等问题 放重token令牌


