<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.ccic.salesapp.noncar.repository.basedb.mapper.InvoiceInfoMapper">

	<resultMap id="BaseResultMap" type="com.ccic.salesapp.noncar.dto.InvoiceInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<result column="ID" property="id" />
		<result column="order_id" property="orderId"/>
		<result column="INSUREINFO_ID" property="insureinfoId" />
		<result column="CREATE_Time" property="createDate" />
		<result column="CLIENTTYPE" property="clientType" />
		<result column="TAXPAYERTYPE" property="taxPayerType" />
		<result column="INVOICETYPE" property="invoiceType" />
		<result column="COMPANYNAME" property="companyName" />
		<result column="TAXMOBILE" property="taxMobile" />
		<result column="TAXEMAIL" property="taxEmail" />
		<result column="TAXPAYERNO" property="taxPayerNo" />
		<result column="TAXREGISTRYADDRESS" property="taxRegistryAddress" />
		<result column="TAXREGISTRYPHONE" property="taxRegistryPhone" />
		<result column="BANKNAME" property="bankName" />
		<result column="ACCOUNTNUMBER" property="accountNumber" />
	</resultMap>
	
	<insert id="insert" parameterType="com.ccic.salesapp.noncar.dto.InvoiceInfo">
		insert into t_noncar_invoiceinfo (
		order_id,
		INSUREINFO_ID,
		CREATE_TIME,
		CLIENTTYPE,
		TAXPAYERTYPE,
		INVOICETYPE,
		COMPANYNAME,
		TAXMOBILE,
		TAXEMAIL,
		TAXPAYERNO,
		TAXREGISTRYADDRESS,
		TAXREGISTRYPHONE,
		BANKNAME,
		ACCOUNTNUMBER
		)
		values (
		#{orderId},
		#{insureinfoId},
		now(),
		#{clientType},
		#{taxPayerType},
		#{invoiceType},
		#{companyName},
		#{taxMobile},
		#{taxEmail},
		#{taxPayerNo},
		#{taxRegistryAddress},
		#{taxRegistryPhone},
		#{bankName},
		#{accountNumber}
		)
	</insert>

	<select id="queryInvoiceInfo" resultMap="BaseResultMap"
		parameterType="java.math.BigDecimal">
		SELECT * FROM t_noncar_invoiceinfo WHERE INSUREINFO_ID =
		#{insureInfoId}
	</select>
	
	<select id="selectInvoiceInfoByOrderId" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		SELECT * FROM t_noncar_invoiceinfo WHERE order_id =
		#{orderId}
	</select>
	
	<select id="selectInvoiceInfoByOrderId2" resultType="com.ccic.salesapp.noncar.dto.request.noncar.InvoiceInfo"
		parameterType="java.lang.Long">
		SELECT 
			accountnumber accountno,
			companyname companyName,
			invoicetype invoiceType,
			taxpayerno taxPayerNo,
			taxpayertype taxPayerType,
			taxmobile mobile,
			taxemail email
		FROM t_noncar_invoiceinfo WHERE order_id =
		#{orderId}
	</select>
	
	<delete id="deleteByOrderId" parameterType="java.lang.Long">
	 	delete from t_noncar_invoiceinfo where order_id = #{orderId}
	</delete>


</mapper>