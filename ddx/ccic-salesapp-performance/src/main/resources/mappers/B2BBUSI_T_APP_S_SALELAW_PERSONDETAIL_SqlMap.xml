<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="com.ccic.salesapp.performance.domain.mapper.B2BBUSI_T_APP_S_SALELAW_PERSONDETAIL_Mapper" >
  <resultMap id="BaseResultMap" class="com.ccic.salesapp.performance.domain.vo.dto.SaleLawPersonDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="CALCMONTH" property="calcmonth" jdbcType="VARCHAR" />
    <result column="USERCODE" property="usercode" jdbcType="VARCHAR" />
    <result column="MONTHSTANDARDPREMIUM" property="monthstandardpremium" jdbcType="DECIMAL" />
    <result column="MONTHSUMPREMIUMPLAN" property="monthsumpremiumplan" jdbcType="DECIMAL" />
    <result column="MONTHPREMIUMREACHRATE" property="monthpremiumreachrate" jdbcType="DECIMAL" />
    <result column="CURRENTMONTHPREMIUMPLAN" property="currentmonthpremiumplan" jdbcType="DECIMAL" />
    <result column="SUMSTANDARDPREMIUM" property="sumstandardpremium" jdbcType="DECIMAL" />
    <result column="YEARSUMPREMIUMPLAN" property="yearsumpremiumplan" jdbcType="DECIMAL" />
    <result column="YEARPREMIUMREACHRATE" property="yearpremiumreachrate" jdbcType="DECIMAL" />
    <result column="UPDATEDATE" property="updatedate" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    CALCMONTH, USERCODE, MONTHSTANDARDPREMIUM, MONTHSUMPREMIUMPLAN, MONTHPREMIUMREACHRATE, 
    CURRENTMONTHPREMIUMPLAN, SUMSTANDARDPREMIUM, YEARSUMPREMIUMPLAN, YEARPREMIUMREACHRATE, 
    UPDATEDATE
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="com.estar.app.chinare.sell.domain.b2b.model.b2bbusi.SaleLawPersonDetailKey" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="B2BBUSI_T_APP_S_SALELAW_PERSONDETAIL.Base_Column_List" />
    from B2BBUSI.T_APP_S_SALELAW_PERSONDETAIL
    where CALCMONTH = #calcmonth:VARCHAR#
      and USERCODE = #usercode:VARCHAR#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.estar.app.chinare.sell.domain.b2b.model.b2bbusi.SaleLawPersonDetailKey" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from B2BBUSI.T_APP_S_SALELAW_PERSONDETAIL
    where CALCMONTH = #calcmonth:VARCHAR#
      and USERCODE = #usercode:VARCHAR#
  </delete>
  <insert id="insert" parameterClass="com.estar.app.chinare.sell.domain.b2b.model.b2bbusi.SaleLawPersonDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into B2BBUSI.T_APP_S_SALELAW_PERSONDETAIL (CALCMONTH, USERCODE, MONTHSTANDARDPREMIUM, 
      MONTHSUMPREMIUMPLAN, MONTHPREMIUMREACHRATE, CURRENTMONTHPREMIUMPLAN, 
      SUMSTANDARDPREMIUM, YEARSUMPREMIUMPLAN, YEARPREMIUMREACHRATE, 
      UPDATEDATE)
    values (#calcmonth:VARCHAR#, #usercode:VARCHAR#, #monthstandardpremium:DECIMAL#, 
      #monthsumpremiumplan:DECIMAL#, #monthpremiumreachrate:DECIMAL#, #currentmonthpremiumplan:DECIMAL#, 
      #sumstandardpremium:DECIMAL#, #yearsumpremiumplan:DECIMAL#, #yearpremiumreachrate:DECIMAL#, 
      #updatedate:TIMESTAMP#)
  </insert>
  <insert id="insertSelective" parameterClass="com.estar.app.chinare.sell.domain.b2b.model.b2bbusi.SaleLawPersonDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into B2BBUSI.T_APP_S_SALELAW_PERSONDETAIL
    <dynamic prepend="(" >
      <isNotNull prepend="," property="calcmonth" >
        CALCMONTH
      </isNotNull>
      <isNotNull prepend="," property="usercode" >
        USERCODE
      </isNotNull>
      <isNotNull prepend="," property="monthstandardpremium" >
        MONTHSTANDARDPREMIUM
      </isNotNull>
      <isNotNull prepend="," property="monthsumpremiumplan" >
        MONTHSUMPREMIUMPLAN
      </isNotNull>
      <isNotNull prepend="," property="monthpremiumreachrate" >
        MONTHPREMIUMREACHRATE
      </isNotNull>
      <isNotNull prepend="," property="currentmonthpremiumplan" >
        CURRENTMONTHPREMIUMPLAN
      </isNotNull>
      <isNotNull prepend="," property="sumstandardpremium" >
        SUMSTANDARDPREMIUM
      </isNotNull>
      <isNotNull prepend="," property="yearsumpremiumplan" >
        YEARSUMPREMIUMPLAN
      </isNotNull>
      <isNotNull prepend="," property="yearpremiumreachrate" >
        YEARPREMIUMREACHRATE
      </isNotNull>
      <isNotNull prepend="," property="updatedate" >
        UPDATEDATE
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="calcmonth" >
        #calcmonth:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="usercode" >
        #usercode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="monthstandardpremium" >
        #monthstandardpremium:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="monthsumpremiumplan" >
        #monthsumpremiumplan:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="monthpremiumreachrate" >
        #monthpremiumreachrate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="currentmonthpremiumplan" >
        #currentmonthpremiumplan:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="sumstandardpremium" >
        #sumstandardpremium:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="yearsumpremiumplan" >
        #yearsumpremiumplan:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="yearpremiumreachrate" >
        #yearpremiumreachrate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="updatedate" >
        #updatedate:TIMESTAMP#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterClass="com.estar.app.chinare.sell.domain.b2b.model.b2bbusi.SaleLawPersonDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update B2BBUSI.T_APP_S_SALELAW_PERSONDETAIL
    <dynamic prepend="set" >
      <isNotNull prepend="," property="monthstandardpremium" >
        MONTHSTANDARDPREMIUM = #monthstandardpremium:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="monthsumpremiumplan" >
        MONTHSUMPREMIUMPLAN = #monthsumpremiumplan:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="monthpremiumreachrate" >
        MONTHPREMIUMREACHRATE = #monthpremiumreachrate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="currentmonthpremiumplan" >
        CURRENTMONTHPREMIUMPLAN = #currentmonthpremiumplan:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="sumstandardpremium" >
        SUMSTANDARDPREMIUM = #sumstandardpremium:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="yearsumpremiumplan" >
        YEARSUMPREMIUMPLAN = #yearsumpremiumplan:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="yearpremiumreachrate" >
        YEARPREMIUMREACHRATE = #yearpremiumreachrate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="updatedate" >
        UPDATEDATE = #updatedate:TIMESTAMP#
      </isNotNull>
    </dynamic>
    where CALCMONTH = #calcmonth:VARCHAR#
      and USERCODE = #usercode:VARCHAR#
  </update>
  <update id="updateByPrimaryKey" parameterClass="com.estar.app.chinare.sell.domain.b2b.model.b2bbusi.SaleLawPersonDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update B2BBUSI.T_APP_S_SALELAW_PERSONDETAIL
    set MONTHSTANDARDPREMIUM = #monthstandardpremium:DECIMAL#,
      MONTHSUMPREMIUMPLAN = #monthsumpremiumplan:DECIMAL#,
      MONTHPREMIUMREACHRATE = #monthpremiumreachrate:DECIMAL#,
      CURRENTMONTHPREMIUMPLAN = #currentmonthpremiumplan:DECIMAL#,
      SUMSTANDARDPREMIUM = #sumstandardpremium:DECIMAL#,
      YEARSUMPREMIUMPLAN = #yearsumpremiumplan:DECIMAL#,
      YEARPREMIUMREACHRATE = #yearpremiumreachrate:DECIMAL#,
      UPDATEDATE = #updatedate:TIMESTAMP#
    where CALCMONTH = #calcmonth:VARCHAR#
      and USERCODE = #usercode:VARCHAR#
  </update>
  
    <select id="selectByUserCode" parameterClass="java.util.HashMap" resultMap="BaseResultMap">
    SELECT * FROM (
	    SELECT * FROM B2BBUSI.T_APP_S_SALELAW_PERSONDETAIL
	    WHERE USERCODE = #userCode:VARCHAR#
		<isEqual property="type" compareValue="0">
		AND CALCMONTH=#searchMonth:VARCHAR#
		</isEqual>
		<isEqual property="type" compareValue="1">
		AND CALCMONTH=TO_CHAR(ADD_MONTHS(SYSDATE, -1),'YYYYMM')
		</isEqual>
		<isEqual property="type" compareValue="2">
		AND	TO_DATE(CALCMONTH,'YYYYMM')>=TRUNC(SYSDATE,'YEAR')
		</isEqual>
		<isEqual property="type" compareValue="3">
		AND	TO_DATE(CALCMONTH,'YYYYMM')>=TRUNC(SYSDATE,'YEAR')
		AND CALCMONTH<![CDATA[<=]]>TO_CHAR(ADD_MONTHS(SYSDATE, -1),'YYYYMM')
		</isEqual>
		<isEqual property="type" compareValue="4">
		AND CALCMONTH=TO_CHAR(SYSDATE,'YYYYMM')
		</isEqual>
		ORDER BY CALCMONTH DESC)
	WHERE ROWNUM=1
  </select>
  
</sqlMap>