<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ccic.salesapp.performance.domain.mapper.SUserDao">
	<resultMap id="BaseResultMap" type="com.ccic.salesapp.performance.domain.vo.dto.SUser">
	    <!--
	      WARNING - @mbg.generated
	      This element is automatically generated by MyBatis Generator, do not modify.
	      This element was generated on Tue Feb 18 12:49:27 CST 2020.
	    -->
	    <id column="ID" jdbcType="DECIMAL" property="id" />
	    <result column="USER_CODE" jdbcType="VARCHAR" property="userCode" />
	    <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
	    <result column="USER_ENAME" jdbcType="VARCHAR" property="userEname" />
	    <result column="DEPT_CODE" jdbcType="VARCHAR" property="deptCode" />
	    <result column="DEPT_NAME" jdbcType="VARCHAR" property="deptName" />
	    <result column="DEPT_CODE_MAKE" jdbcType="VARCHAR" property="deptCodeMake" />
	    <result column="DEPT_NAME_MAKE" jdbcType="VARCHAR" property="deptNameMake" />
	    <result column="PASSWD" jdbcType="VARCHAR" property="passwd" />
	    <result column="PHONE" jdbcType="VARCHAR" property="phone" />
	    <result column="TEL" jdbcType="VARCHAR" property="tel" />
	    <result column="ADDRESS" jdbcType="VARCHAR" property="address" />
	    <result column="POSTCODE" jdbcType="VARCHAR" property="postcode" />
	    <result column="EMAIL" jdbcType="VARCHAR" property="email" />
	    <result column="MARK" jdbcType="VARCHAR" property="mark" />
	    <result column="DEVICE_TOKEN" jdbcType="VARCHAR" property="deviceToken" />
	    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
	    <result column="UPDATE_DATE" jdbcType="TIMESTAMP" property="updateDate" />
	    <result column="TOKEN" jdbcType="VARCHAR" property="token" />
	    <result column="TOKEN_EXPIRE_TIME" jdbcType="TIMESTAMP" property="tokenExpireTime" />
	    <result column="C_MOBILE" jdbcType="VARCHAR" property="cMobile" />
	    <result column="STORE_CODE" jdbcType="VARCHAR" property="storeCode" />
	    <result column="DEFEAT_LOG_TIMES" jdbcType="DECIMAL" property="defeatLogTimes" />
	    <result column="LOCK_EXPIRE_TIME" jdbcType="TIMESTAMP" property="lockExpireTime" />
	    <result column="SALARY_PASSWORD" jdbcType="VARCHAR" property="salaryPassword" />
	    <result column="CHANNEL_CODE" jdbcType="VARCHAR" property="channelCode" />
	    <result column="RECEIVE_REPORT_MSG" jdbcType="VARCHAR" property="receiveReportMsg" />
	    <result column="USER_TEL" jdbcType="VARCHAR" property="userTel" />
	  </resultMap>
	  
	   <sql id="Base_Column_List">
    ID, USER_CODE, USER_NAME, USER_ENAME, DEPT_CODE, DEPT_NAME, DEPT_CODE_MAKE, DEPT_NAME_MAKE, 
    PASSWD, PHONE, TEL, ADDRESS, POSTCODE, EMAIL, MARK, DEVICE_TOKEN, CREATE_DATE, UPDATE_DATE, 
    TOKEN, TOKEN_EXPIRE_TIME,C_MOBILE,STORE_CODE,DEFEAT_LOG_TIMES,LOCK_EXPIRE_TIME, SALARY_PASSWORD,
    CHANNEL_CODE,RECEIVE_REPORT_MSG
  </sql>
	  
	<select id="get" resultMap="BaseResultMap">
		select `ID`,`USER_CODE`,`USER_NAME`,`USER_ENAME`,`DEPT_CODE`,`DEPT_NAME`,`DEPT_CODE_MAKE`,`DEPT_NAME_MAKE`,`PASSWD`,`PHONE`,`TEL`,`ADDRESS`,`POSTCODE`,`EMAIL`,`MARK`,`DEVICE_TOKEN`,`CREATE_DATE`,`UPDATE_DATE`,`TOKEN`,`TOKEN_EXPIRE_TIME`,`C_MOBILE`,`STORE_CODE`,`DEFEAT_LOG_TIMES`,`LOCK_EXPIRE_TIME`,`SALARY_PASSWORD`,`CHANNEL_CODE`,`RECEIVE_REPORT_MSG` from t_user_info where ID = #{value}
	</select>

	<select id="list" resultMap="BaseResultMap">
		select `ID`,`USER_CODE`,`USER_NAME`,`USER_ENAME`,`DEPT_CODE`,`DEPT_NAME`,`DEPT_CODE_MAKE`,`DEPT_NAME_MAKE`,`PASSWD`,`PHONE`,`TEL`,`ADDRESS`,`POSTCODE`,`EMAIL`,`MARK`,`DEVICE_TOKEN`,`CREATE_DATE`,`UPDATE_DATE`,`TOKEN`,`TOKEN_EXPIRE_TIME`,`C_MOBILE`,`STORE_CODE`,`DEFEAT_LOG_TIMES`,`LOCK_EXPIRE_TIME`,`SALARY_PASSWORD`,`CHANNEL_CODE`,`RECEIVE_REPORT_MSG` from t_user_info
        <where>  
		  		  <if test="id != null and id != ''"> and ID = #{id} </if>
		  		  <if test="userCode != null and userCode != ''"> and USER_CODE = #{userCode} </if>
		  		  <if test="userName != null and userName != ''"> and USER_NAME = #{userName} </if>
		  		  <if test="userEname != null and userEname != ''"> and USER_ENAME = #{userEname} </if>
		  		  <if test="deptCode != null and deptCode != ''"> and DEPT_CODE = #{deptCode} </if>
		  		  <if test="deptName != null and deptName != ''"> and DEPT_NAME = #{deptName} </if>
		  		  <if test="deptCodeMake != null and deptCodeMake != ''"> and DEPT_CODE_MAKE = #{deptCodeMake} </if>
		  		  <if test="deptNameMake != null and deptNameMake != ''"> and DEPT_NAME_MAKE = #{deptNameMake} </if>
		  		  <if test="passwd != null and passwd != ''"> and PASSWD = #{passwd} </if>
		  		  <if test="phone != null and phone != ''"> and PHONE = #{phone} </if>
		  		  <if test="tel != null and tel != ''"> and TEL = #{tel} </if>
		  		  <if test="address != null and address != ''"> and ADDRESS = #{address} </if>
		  		  <if test="postcode != null and postcode != ''"> and POSTCODE = #{postcode} </if>
		  		  <if test="email != null and email != ''"> and EMAIL = #{email} </if>
		  		  <if test="mark != null and mark != ''"> and MARK = #{mark} </if>
		  		  <if test="deviceToken != null and deviceToken != ''"> and DEVICE_TOKEN = #{deviceToken} </if>
		  		  <if test="createDate != null and createDate != ''"> and CREATE_DATE = #{createDate} </if>
		  		  <if test="updateDate != null and updateDate != ''"> and UPDATE_DATE = #{updateDate} </if>
		  		  <if test="token != null and token != ''"> and TOKEN = #{token} </if>
		  		  <if test="tokenExpireTime != null and tokenExpireTime != ''"> and TOKEN_EXPIRE_TIME = #{tokenExpireTime} </if>
		  		  <if test="cMobile != null and cMobile != ''"> and C_MOBILE = #{cMobile} </if>
		  		  <if test="storeCode != null and storeCode != ''"> and STORE_CODE = #{storeCode} </if>
		  		  <if test="defeatLogTimes != null and defeatLogTimes != ''"> and DEFEAT_LOG_TIMES = #{defeatLogTimes} </if>
		  		  <if test="lockExpireTime != null and lockExpireTime != ''"> and LOCK_EXPIRE_TIME = #{lockExpireTime} </if>
		  		  <if test="salaryPassword != null and salaryPassword != ''"> and SALARY_PASSWORD = #{salaryPassword} </if>
		  		  <if test="channelCode != null and channelCode != ''"> and CHANNEL_CODE = #{channelCode} </if>
		  		  <if test="receiveReportMsg != null and receiveReportMsg != ''"> and RECEIVE_REPORT_MSG = #{receiveReportMsg} </if>
		  		</where>
        <choose>
            <when test="sort != null and sort.trim() != ''">
                order by ${sort} ${order}
            </when>
			<otherwise>
                order by ID desc
			</otherwise>
        </choose>
		<if test="offset != null and limit != null">
			limit #{offset}, #{limit}
		</if>
	</select>
	
 	<select id="count" resultType="int">
		select count(*) from t_user_info
		 <where>  
		  		  <if test="id != null and id != ''"> and ID = #{id} </if>
		  		  <if test="userCode != null and userCode != ''"> and USER_CODE = #{userCode} </if>
		  		  <if test="userName != null and userName != ''"> and USER_NAME = #{userName} </if>
		  		  <if test="userEname != null and userEname != ''"> and USER_ENAME = #{userEname} </if>
		  		  <if test="deptCode != null and deptCode != ''"> and DEPT_CODE = #{deptCode} </if>
		  		  <if test="deptName != null and deptName != ''"> and DEPT_NAME = #{deptName} </if>
		  		  <if test="deptCodeMake != null and deptCodeMake != ''"> and DEPT_CODE_MAKE = #{deptCodeMake} </if>
		  		  <if test="deptNameMake != null and deptNameMake != ''"> and DEPT_NAME_MAKE = #{deptNameMake} </if>
		  		  <if test="passwd != null and passwd != ''"> and PASSWD = #{passwd} </if>
		  		  <if test="phone != null and phone != ''"> and PHONE = #{phone} </if>
		  		  <if test="tel != null and tel != ''"> and TEL = #{tel} </if>
		  		  <if test="address != null and address != ''"> and ADDRESS = #{address} </if>
		  		  <if test="postcode != null and postcode != ''"> and POSTCODE = #{postcode} </if>
		  		  <if test="email != null and email != ''"> and EMAIL = #{email} </if>
		  		  <if test="mark != null and mark != ''"> and MARK = #{mark} </if>
		  		  <if test="deviceToken != null and deviceToken != ''"> and DEVICE_TOKEN = #{deviceToken} </if>
		  		  <if test="createDate != null and createDate != ''"> and CREATE_DATE = #{createDate} </if>
		  		  <if test="updateDate != null and updateDate != ''"> and UPDATE_DATE = #{updateDate} </if>
		  		  <if test="token != null and token != ''"> and TOKEN = #{token} </if>
		  		  <if test="tokenExpireTime != null and tokenExpireTime != ''"> and TOKEN_EXPIRE_TIME = #{tokenExpireTime} </if>
		  		  <if test="cMobile != null and cMobile != ''"> and C_MOBILE = #{cMobile} </if>
		  		  <if test="storeCode != null and storeCode != ''"> and STORE_CODE = #{storeCode} </if>
		  		  <if test="defeatLogTimes != null and defeatLogTimes != ''"> and DEFEAT_LOG_TIMES = #{defeatLogTimes} </if>
		  		  <if test="lockExpireTime != null and lockExpireTime != ''"> and LOCK_EXPIRE_TIME = #{lockExpireTime} </if>
		  		  <if test="salaryPassword != null and salaryPassword != ''"> and SALARY_PASSWORD = #{salaryPassword} </if>
		  		  <if test="channelCode != null and channelCode != ''"> and CHANNEL_CODE = #{channelCode} </if>
		  		  <if test="receiveReportMsg != null and receiveReportMsg != ''"> and RECEIVE_REPORT_MSG = #{receiveReportMsg} </if>
		  		</where>
	</select>
	 
	<insert id="save" parameterType="com.ccic.salesapp.performance.domain.vo.dto.SUser">
		insert into t_user_info
		(
			`ID`, 
			`USER_CODE`, 
			`USER_NAME`, 
			`USER_ENAME`, 
			`DEPT_CODE`, 
			`DEPT_NAME`, 
			`DEPT_CODE_MAKE`, 
			`DEPT_NAME_MAKE`, 
			`PASSWD`, 
			`PHONE`, 
			`TEL`, 
			`ADDRESS`, 
			`POSTCODE`, 
			`EMAIL`, 
			`MARK`, 
			`DEVICE_TOKEN`, 
			`CREATE_DATE`, 
			`UPDATE_DATE`, 
			`TOKEN`, 
			`TOKEN_EXPIRE_TIME`, 
			`C_MOBILE`, 
			`STORE_CODE`, 
			`DEFEAT_LOG_TIMES`, 
			`LOCK_EXPIRE_TIME`, 
			`SALARY_PASSWORD`, 
			`CHANNEL_CODE`, 
			`RECEIVE_REPORT_MSG`
		)
		values
		(
			#{id}, 
			#{userCode}, 
			#{userName}, 
			#{userEname}, 
			#{deptCode}, 
			#{deptName}, 
			#{deptCodeMake}, 
			#{deptNameMake}, 
			#{passwd}, 
			#{phone}, 
			#{tel}, 
			#{address}, 
			#{postcode}, 
			#{email}, 
			#{mark}, 
			#{deviceToken}, 
			#{createDate}, 
			#{updateDate}, 
			#{token}, 
			#{tokenExpireTime}, 
			#{cMobile}, 
			#{storeCode}, 
			#{defeatLogTimes}, 
			#{lockExpireTime}, 
			#{salaryPassword}, 
			#{channelCode}, 
			#{receiveReportMsg}
		)
	</insert>
	 
	<update id="update" parameterType="com.ccic.salesapp.performance.domain.vo.dto.SUser">
		update t_user_info 
		<set>
			<if test="userCode != null">`USER_CODE` = #{userCode}, </if>
			<if test="userName != null">`USER_NAME` = #{userName}, </if>
			<if test="userEname != null">`USER_ENAME` = #{userEname}, </if>
			<if test="deptCode != null">`DEPT_CODE` = #{deptCode}, </if>
			<if test="deptName != null">`DEPT_NAME` = #{deptName}, </if>
			<if test="deptCodeMake != null">`DEPT_CODE_MAKE` = #{deptCodeMake}, </if>
			<if test="deptNameMake != null">`DEPT_NAME_MAKE` = #{deptNameMake}, </if>
			<if test="passwd != null">`PASSWD` = #{passwd}, </if>
			<if test="phone != null">`PHONE` = #{phone}, </if>
			<if test="tel != null">`TEL` = #{tel}, </if>
			<if test="address != null">`ADDRESS` = #{address}, </if>
			<if test="postcode != null">`POSTCODE` = #{postcode}, </if>
			<if test="email != null">`EMAIL` = #{email}, </if>
			<if test="mark != null">`MARK` = #{mark}, </if>
			<if test="deviceToken != null">`DEVICE_TOKEN` = #{deviceToken}, </if>
			<if test="createDate != null">`CREATE_DATE` = #{createDate}, </if>
			<if test="updateDate != null">`UPDATE_DATE` = #{updateDate}, </if>
			<if test="token != null">`TOKEN` = #{token}, </if>
			<if test="tokenExpireTime != null">`TOKEN_EXPIRE_TIME` = #{tokenExpireTime}, </if>
			<if test="cMobile != null">`C_MOBILE` = #{cMobile}, </if>
			<if test="storeCode != null">`STORE_CODE` = #{storeCode}, </if>
			<if test="defeatLogTimes != null">`DEFEAT_LOG_TIMES` = #{defeatLogTimes}, </if>
			<if test="lockExpireTime != null">`LOCK_EXPIRE_TIME` = #{lockExpireTime}, </if>
			<if test="salaryPassword != null">`SALARY_PASSWORD` = #{salaryPassword}, </if>
			<if test="channelCode != null">`CHANNEL_CODE` = #{channelCode}, </if>
			<if test="receiveReportMsg != null">`RECEIVE_REPORT_MSG` = #{receiveReportMsg}</if>
		</set>
		where ID = #{id}
	</update>
	
	<delete id="remove">
		delete from t_user_info where ID = #{value}
	</delete>
	
	<delete id="batchRemove">
		delete from t_user_info where ID in 
		<foreach item="id" collection="array" open="(" separator="," close=")">
			#{id}
		</foreach>
	</delete>
	
	<select id="selectByUserCode" parameterType="java.lang.String" resultMap="BaseResultMap">
    select 
    <include refid="com.ccic.salesapp.performance.domain.mapper.SUserDao.Base_Column_List" />
    from t_user_info
    where USER_CODE = #{userCode}
  </select>
  
  <update id="updateSalaryPwd" parameterType="com.ccic.salesapp.performance.domain.vo.dto.SUser">
    update t_user_info
    	set SALARY_PASSWORD = #{salaryPassword}
    where USER_CODE = #{userCode}
  </update>  


	 <select id="selectByUser" resultMap="BaseResultMap"  parameterType="java.util.Map">
		 select * from t_user_info where  USER_CODE=#{userCode}
	 </select>
</mapper>