webpackJsonp([20],{"0UqD":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._v(" "),a("div",{staticStyle:{position:"absolute",width:"100%",height:"100%",display:"flex","justify-content":"center","align-items":"center"}},[a("div",{staticClass:"flex-vertical"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowLoading,expression:"isShowLoading"}],staticClass:"flex-horizontal"},[a("div",{staticClass:"panel-left"},[a("div",{staticClass:"title",attrs:{align:"center"}},[e._v("登录")]),e._v(" "),a("el-input",{attrs:{size:"large",placeholder:"请输入用户名"},on:{change:e.changeWord},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"font-primary fa fa-fw fa-user font-icon"})])],2),e._v(" "),a("el-input",{attrs:{size:"large",placeholder:"请输入密码",type:"password"},on:{change:e.changeWord},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"font-primary fa fa-fw fa-lock font-icon"})])],2),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{size:"large",type:"password"},model:{value:e.passwordMem,callback:function(t){e.passwordMem=t},expression:"passwordMem"}}),e._v(" "),a("el-input",{attrs:{size:"large",placeholder:"请输入验证码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.loginClk(t):null}},model:{value:e.captcha,callback:function(t){e.captcha=t},expression:"captcha"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"font-primary fa fa-fw fa-shield font-icon"})]),e._v(" "),a("template",{slot:"append"},[a("img",{staticStyle:{margin:"0 1px"},attrs:{width:"80",height:"38",src:e.imgUrl},on:{click:e.tabCode}})])],2),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.loginClk}},[e._v("登录")]),e._v(" "),a("el-checkbox",{nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.loginClk(t):null}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住用户名密码（15天内有效）")])],1)]),e._v(" "),a("logo-footer")],1)])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex-box"},[s("div",{staticClass:"bg-primary",staticStyle:{display:"flex","flex-flow":"column","justify-content":"space-between","align-items":"center",width:"100%",height:"50%"}},[s("div"),e._v(" "),s("img",{staticStyle:{height:"80px"},attrs:{src:a("71J6")}}),e._v(" "),s("div",{staticStyle:{height:"176px"}})]),e._v(" "),s("div",{staticStyle:{width:"100%",height:"50%",background:"white"}})])}],o={render:s,staticRenderFns:i};t.a=o},"71J6":function(e,t,a){e.exports=a.p+"static/img/logo_white.png"},"9U5l":function(e,t,a){var s=a("dxYu");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("FIqI")("88a43dda",s,!0,{})},GIfx:function(e,t,a){var s=a("s91j");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("FIqI")("9dad21b8",s,!0,{})},L1Z8:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__=__webpack_require__("rVsN"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);__webpack_exports__.a={name:"login",components:{logoFooter:function(e){__webpack_require__.e(36).then(function(){return e(__webpack_require__("9iUS"))}.bind(null,__webpack_require__)).catch(__webpack_require__.oe)}},data:function(){return{passwordMem:"123456",username:"",password:"",captcha:"",checked:!1,jsonstr:"",code:"",imgUrl:null,isLogin:!1,isShowLoading:!1}},methods:{getCookie:function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},tabCode:function(){this.imageCode()},imageCode:function(){var e=this;utils.http.post("user/imageCode",{}).then(function(t){e.imgUrl="data:image/jpg;base64,"+t.data.data}).catch(function(t){e.$message.error("获取数据失败，请检查网络!")})},changeWord:function(){localStorage.setItem("remember","0")},loginClk:function loginClk(){var _this2=this,pwd=this.password;0==this.username.length?this.$message.error("请输入用户名"):0==pwd.length?this.$message.error("请输入密码"):0==this.captcha.length?this.$message.error("请输入验证码"):(this.isShowLoading=!0,utils.http.post("user/login",{userCode:this.username,phone:this.username,password:pwd,code:this.captcha,remember:localStorage.getItem("remember")}).then(function(res){if(_this2.isShowLoading=!1,"-1"==res.data.data)_this2.$message.error("用户名与密码不匹配"),_this2.imageCode();else if("-2"==res.data.data)_this2.$message.error("该账号无权限登录，请联系管理员"),_this2.imageCode();else if("0"==res.data.data)_this2.$message.error("验证码错误"),_this2.imageCode();else{_this2.jsonstr=res.data.data;var obj=eval("("+_this2.jsonstr+")");"0"==obj.islogin?(_this2.$message.error("该账号无权限登录，请联系管理员"),_this2.imageCode()):(utils.cache.set("allChannel",res.data.allChannel),utils.cache.set("allJobLevel",res.data.allJobLevel),utils.cache.set("jobLevel",obj.jobLevel),utils.cache.set("channelId",obj.channelId),utils.cache.set("depId",obj.depId),utils.cache.set("userName",obj.userName),utils.cache.set("token",obj.token),localStorage.setItem("ORGroot",obj.ORGroot),localStorage.setItem("subject",obj.subject),_this2.getOrg(obj.depId).then(function(e){utils.cache.set("allOrgInfo",e.data.allOrgInfo),utils.cache.set("chlidrenOrgInfo",e.data.chlidrenOrgInfo)}),_this2.getroles(_this2.username),1==_this2.checked&&localStorage.setItem("remember","1"),0==_this2.checked&&localStorage.setItem("remember","0"),_this2.isLogin=!0,_this2.$router.push("/rhOffic/home"))}}).catch(function(e){_this2.isShowLoading=!1,_this2.$message.error("获取数据失败，请检查网络!")}))},getOrg:function(e){return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function(t,a){utils.http.post("user/getOrg",{DEPID:e}).then(function(e){t(e)})})},getroles:function getroles(userCode){utils.http.post("user/roleAll").then(function(res){if(1==res.data.result){var allRole=eval("("+res.data.data+")");utils.cache.set("allRole",allRole)}}),utils.http.post("user/selectRoleId",{userCode:userCode}).then(function(e){1==e.data.result&&utils.cache.set("userRoleList",e.data.data)})}},watch:{password:function(e,t){0==e.length&&(this.checked=!1,localStorage.setItem("remember","0"))}},mounted:function mounted(){var _this3=this;null==localStorage.getItem("remember")&&localStorage.setItem("remember","0"),"1"==localStorage.getItem("remember")?(this.checked=!0,utils.http.post("user/userRemember",{}).then(function(res){if(_this3.imageCode(),"token已失效"==res.data.data)_this3.checked=!1,localStorage.setItem("remember","0"),_this3.passwordMem="",_this3.password="",_this3.username="";else{var data2=eval("("+res.data.data+")");_this3.passwordMem=data2.password,_this3.password=data2.password,_this3.username=data2.userCode}}).catch(function(e){_this3.imageCode(),_this3.$message.error("获取数据失败，请检查网络!")})):this.imageCode(),this.isLogin=!1},beforeRouteLeave:function(e,t,a){this.isLogin?a():a("login")}}},NaOX:function(e,t,a){"use strict";function s(e){a("9U5l"),a("GIfx")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("L1Z8"),o=a("0UqD"),r=a("C7Lr"),l=s,n=r(i.a,o.a,!1,l,"data-v-041b3e09",null);t.default=n.exports},dxYu:function(e,t,a){t=e.exports=a("UTlt")(!1),t.push([e.i,".flex-box[data-v-041b3e09]{position:absolute;width:100%;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#ddd}.flex-box[data-v-041b3e09],.flex-vertical[data-v-041b3e09]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column;flex-flow:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.flex-vertical[data-v-041b3e09]{border-radius:4px;background:#fff}.flex-horizontal[data-v-041b3e09]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:350px;height:300px;padding:12px 20px;border-radius:4px;background:#fff}.panel-left[data-v-041b3e09]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:distribute;justify-content:space-around;width:100%;height:100%}.panel-left>.title[data-v-041b3e09]{font-size:16px;color:#343d5c}.panel-right[data-v-041b3e09]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;width:50%;height:100%}.font-icon[data-v-041b3e09]{font-size:20px}.panel-right-down[data-v-041b3e09]{color:#20a0ff;font-size:15px}",""])},s91j:function(e,t,a){t=e.exports=a("UTlt")(!1),t.push([e.i,".el-input-group__append{padding:0;line-height:11px}",""])}});